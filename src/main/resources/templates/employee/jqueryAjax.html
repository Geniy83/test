<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>Список всех сотрудников</title>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script type="text/javascript">
        $(document).ready(function () {
            var employee = {};
            getAllEmployee();
            $('#btnAddEmployee').click(function () {
                employee.first_name = $('#txtFirst_name').val();
                employee.last_name = $('#txtLast_name').val();
                employee.department_id = $('#txtDepartment_id').val();
                employee.job_title = $('#txtJob_title').val();
                employee.job_gender = $('#txtGender').val();
                employee.data_of_birth = $('#txtData_of_birth').val();
                var employeeObj = JSON.stringify(employee);
                $.ajax({
                    url: 'http://localhost:8080/employee',
                    method: 'POST',
                    data: employeeObj,
                    contentType: 'application/json',
                    success: function () {
                        alert('Saved successfully');
                        getAllEmployee();
                    },
                    error: function(error) {
                        alert(error);
                    }
                })
            })
        })

        function getAllEmployee() {
            $.ajax({
                url: "http://localhost:8080/employee",
                method: "GET",
                dataType: "json",
                success: function(data) {
                    var tableBody = $('#tblEmployee tbody');
                    tableBody.empty();
                    $(data).each(function(index, element) {
                        tableBody.append('<tr><td>' + element.first_name + '</tr><td>' + element.last_name + '</tr></td>');
                    })
                },
                error: function (error) {
                    alert(error);
                }
            })
        }
    </script>

</head>
<body>
    <div>
        <table>
            <tr>
                <td>First_name</td>
                <td><label for="txtFirst_name"></label><input type="text" id = "txtFirst_name"></td>
            </tr>
            <tr>
                <td>Last_name</td>
                <td><label for="txtLast_name"></label><input type="text" id = "txtLast_name"></td>
            </tr>
            <tr>
                <td>Department_id</td>
                <td><label for="txtDepartment_id"></label><input type="text" id = "txtDepartment_id"></td>
            </tr>
            <tr>
                <td>Job_title</td>
                <td><label for="txtJob_title"></label><input type="text" id = "txtJob_title"></td>
            </tr>
            <tr>
                <td>Gender</td>
                <td><label for="txtGender"></label><input type="text" id = "txtGender"></td>
            </tr>
            <tr>
                <td>Data_of_birth</td>
                <td><label for="txtData_of_birth"></label><input type="text" id = "txtData_of_birth"></td>
            </tr>
            <tr colspan = "2">
                <td><input type="button" value="Add employee" id="btnAddEmployee"></td>
            </tr>
        </table>

        <table border = "1" id = "tblEmployee">
            <thead>
                <tr>
                    <th>First name</th>
                    <th>Last name</th>
                </tr>
            </thead>
            <tbody>

            </tbody>
        </table>
    </div>
</body>
</html>